@model IEnumerable<CoolCareSystem.Models.ProductModel>

@{
    ViewBag.Title = "My Products";
}

<p class="title1">My Products</p>

@Html.ActionLink("Back To Products", "Product", "UserProduct", new { @class = "btn btn-sm btn-primary pull-left" })
<br />
<br />
<br />

<div id="UserProducts">
    @(Html.DevExtreme().DataGrid()
        .ID("userProductsGridContainer")
        .DataSource(Model)
        .RowAlternationEnabled(true)
        .RepaintChangesOnly(true)
        .StateStoring(s => s.Enabled(true).Type(StateStoringType.LocalStorage).StorageKey("UserProductsUser"))
        .Export(e => e.Enabled(true).AllowExportSelectedData(true))
        .SearchPanel(s => s.Visible(true).HighlightCaseSensitive(true))
        .AllowColumnReordering(true)
        .ShowBorders(true)
        .ColumnAutoWidth(true)
        .Grouping(g => g.AutoExpandAll(true))
        .Pager(p => p.ShowPageSizeSelector(true).AllowedPageSizes(new[] { 5, 10, 20 }))
        .Paging(p => p.PageSize(10))
        .GroupPanel(g => g.Visible(true).EmptyPanelText("Drag a column"))
        .Sorting(s => s.Mode(GridSortingMode.Multiple))
        .ColumnChooser(c => c.Enabled(true).Mode(GridColumnChooserMode.Select))
        .ShowColumnLines(true)
        .Columns(columns =>
        {
        columns.Add()
        .DataField("Id")
        .Caption("Id")
        .Alignment(HorizontalAlignment.Left);
        columns.Add()
        .DataField("ProductName");
        columns.Add()
        .DataField("Price")
        .Alignment(HorizontalAlignment.Left)
        .CellTemplate(@<text>
        <span>
        ₹ <%- value %>
        </span>
        </text>);
        columns.Add()
        .DataField("BilledYear")
        .Alignment(HorizontalAlignment.Left);
        columns.Add()
        .DataField("IsApproved")
        .Caption("Approval Status")
        .CellTemplate(@<text>
        <% if(value) { %>
        <span><i class="glyphicon glyphicon-ok"></i></span>
        <% }else{ %>
        <span><i class="glyphicon glyphicon-remove"></i></span>
        <% }%>

        </text>);
        columns.Add()
        .DataField("IsAvailable")
        .Caption("Saled")
        .CellTemplate(@<text>
        <% if(value) { %>
        <span><i class="glyphicon glyphicon-remove"></i></span>
        <% }else{ %>
        <span><i class="glyphicon glyphicon-ok"></i></span>
        <% }%>

        </text>);
        columns.Add()
        .DataField("IsAvailable")
        .Caption("")
        .CellTemplate(@<text>
            <% if(value && data.IsApproved) { %>
                <a href="@Html.Raw(Url.Action("UpdateProductAvailable", "UserProduct"))?Id=<%= data.Id %>" class="btn btn-xs btn-primary">Close</a>
            <% }else if(value && !data.IsApproved){ %>
                <a href="@Html.Raw(Url.Action("UserProduct", "UserProduct"))?Id=<%= data.Id %>" class="btn btn-xs btn-primary disabled">Not Approved</a>
            <% }else{ %>
                <a href="@Html.Raw(Url.Action("UserProduct", "UserProduct"))?Id=<%= data.Id %>" class="btn btn-xs btn-primary disabled">Saled</a>
            <% }%>

        </text>);
        })
    )
</div>
@section Scripts {
    <script>

    </script>
}